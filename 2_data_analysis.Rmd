---
title: "Data analysis"
output: html_notebook
---

```{r}
#automatic install of packages if they are not readily available
list.of.packages <- c(
  "tidyverse", 
  "ranger",
  "lavaan",
  "partykit"
  )

new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]

if(length(new.packages) > 0){
  install.packages(new.packages, dep=TRUE)
}

library(tidyverse)
library(ranger)
library(lavaan)
library(partykit)

#loading functions
source("functions.R")

#removing scientific notation
options(scipen = 9999)

rm(list.of.packages, new.packages)
```


```{r}
load("ecoregions_plant_diversity.RData")
```


#The data

Here I focus on the world's ecoregions with an area equal or larger than 10.000 $km_{2}$ and that are at least at 1000 $km$ from any other ecoregion. These 666 ecoregions are represented once per row in the dataset `ecoregions`, that has the following structure:

  + Columns relative to the ecoregion identification, named `ecoregion_x` describing the name, biome, realm, continent and area in $km_{2}$ of the ecoregion.
  + Columns with proxies of bias in the species data of the ecoregions, named `bias_x`, with the number of records, records per area unit, number of species per record, and number of species per record per squared kilometre.
  + Columns relative to plant species richness, named `richness_x`, with richness values for 